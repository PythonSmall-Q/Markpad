# Internationalization (i18n) 国际化

Markpad 现在支持多语言，使用 vue-i18n 实现。

## 支持的语言

- **简体中文** (zh-CN) - 默认语言
- **English** (en-US)

## 使用方法

### 在组件中使用

```vue
<template>
  <div>
    <!-- 使用 $t 函数翻译 -->
    <h1>{{ $t('app.name') }}</h1>
    <p>{{ $t('app.description') }}</p>
    
    <!-- 使用带参数的翻译 -->
    <button>{{ $t('editor.toolbar.bold') }}</button>
  </div>
</template>

<script setup>
import { useI18n } from 'vue-i18n'

const { t, locale } = useI18n()

// 在 script 中使用
console.log(t('app.name'))

// 切换语言
function switchLanguage(lang) {
  locale.value = lang
}
</script>
```

### 切换语言

用户可以通过以下方式切换语言：

1. **设置页面**: 打开设置 → 语言 → 选择语言
2. **快捷键**: `Ctrl + ,` 打开设置
3. **编程方式**:
```javascript
import { useI18n } from 'vue-i18n'
const { locale } = useI18n()
locale.value = 'en-US' // 或 'zh-CN'
```

## 语言文件结构

语言文件位于 `src/i18n/locales/` 目录：

```
src/i18n/
├── index.js           # i18n 配置
└── locales/
    ├── zh-CN.js       # 简体中文
    └── en-US.js       # English
```

### 语言文件格式

```javascript
// src/i18n/locales/zh-CN.js
export default {
  app: {
    name: 'Markpad',
    description: '强大的 Markdown 笔记本应用'
  },
  menu: {
    file: '文件',
    edit: '编辑',
    // ...
  }
}
```

## 添加新语言

### 步骤 1: 创建语言文件

在 `src/i18n/locales/` 创建新文件，例如 `ja-JP.js`：

```javascript
export default {
  app: {
    name: 'Markpad',
    description: '強力な Markdown ノートアプリケーション'
  },
  // ... 其他翻译
}
```

### 步骤 2: 注册语言

在 `src/i18n/index.js` 中导入并注册：

```javascript
import zhCN from './locales/zh-CN'
import enUS from './locales/en-US'
import jaJP from './locales/ja-JP'  // 新增

const i18n = createI18n({
  locale: savedLocale,
  fallbackLocale: 'en-US',
  messages: {
    'zh-CN': zhCN,
    'en-US': enUS,
    'ja-JP': jaJP  // 新增
  }
})
```

### 步骤 3: 更新设置页面

在 `src/components/SettingsPage.vue` 添加语言选项：

```vue
<el-radio-button label="ja-JP">日本語</el-radio-button>
```

并在语言文件中添加翻译：

```javascript
// zh-CN.js
settings: {
  language: {
    jaJP: '日本語'
  }
}

// en-US.js
settings: {
  language: {
    jaJP: 'Japanese'
  }
}
```

## 翻译键命名规范

使用点号分隔的层级结构：

```
模块.子模块.具体项
```

示例：
- `app.name` - 应用名称
- `editor.toolbar.bold` - 编辑器工具栏的加粗按钮
- `settings.appearance.theme` - 设置页面外观部分的主题选项

## 最佳实践

### 1. 始终使用翻译键

❌ 不好的做法：
```vue
<button>保存</button>
```

✅ 好的做法：
```vue
<button>{{ $t('header.save') }}</button>
```

### 2. 提供回退文本

```vue
<p>{{ $t('messages.welcome', '欢迎') }}</p>
```

### 3. 使用插值

```vue
<!-- 语言文件 -->
welcome: '欢迎, {name}!'

<!-- 组件中 -->
<p>{{ $t('messages.welcome', { name: userName }) }}</p>
```

### 4. 复数处理

```javascript
// 语言文件
messages: {
  apple: 'no apples | one apple | {count} apples'
}

// 组件中
$t('messages.apple', count)
```

## 持久化

语言设置会自动保存到：
- **localStorage**: `markpad-locale`
- **Settings Store**: `settingsStore.locale`

## Element Plus 国际化

Element Plus 组件的语言会跟随应用语言自动切换。如需自定义，可以在 `main.js` 中配置：

```javascript
import ElementPlus from 'element-plus'
import zhCn from 'element-plus/dist/locale/zh-cn.mjs'
import en from 'element-plus/dist/locale/en.mjs'

app.use(ElementPlus, {
  locale: locale.value === 'zh-CN' ? zhCn : en
})
```

## 测试翻译

### 快速切换语言测试

在浏览器控制台中：

```javascript
// 切换到英语
localStorage.setItem('markpad-locale', 'en-US')
location.reload()

// 切换到中文
localStorage.setItem('markpad-locale', 'zh-CN')
location.reload()
```

## 贡献翻译

欢迎贡献新的语言翻译！请：

1. Fork 项目
2. 创建语言文件
3. 完成翻译（参考 zh-CN.js）
4. 提交 Pull Request

## 已完成的翻译覆盖

- ✅ 应用基本信息
- ✅ 菜单和导航
- ✅ 编辑器工具栏
- ✅ 设置页面（完整）
- ✅ 欢迎页面
- ✅ 对话框和消息
- ✅ 导出功能
- ⏳ 帮助文档（待完成）

## 未来计划

- [ ] 添加更多语言（日语、韩语、法语等）
- [ ] RTL（从右到左）语言支持
- [ ] 日期和时间本地化
- [ ] 数字格式本地化
- [ ] 货币格式支持
